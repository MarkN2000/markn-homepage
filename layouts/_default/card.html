{{/* layouts/_default/card.html */}}
<div class="bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden flex flex-col"> {{/* flex flex-col を追加 */}}
    {{/* サムネイル画像エリア 16:9 */}}
    {{ $thumbnail := "" }}
    {{/* フロントマターで 'thumbnail' が指定されていればそれを使う */}}
    {{ if .Params.thumbnail }}
        {{ $thumbnail = (.Resources.GetMatch .Params.thumbnail) | default (resources.Get .Params.thumbnail) }}
    {{ end }}
    {{/* 指定がなければ、記事バンドル内の最初の画像を探すか、デフォルト画像を使う (高度な例) */}}
    {{/* ここでは単純化のため、Params.thumbnail のみ考慮。なければプレースホルダー */}}

    <a href="{{ .RelPermalink }}" class="block">
        <div class="aspect-video bg-gray-200">
            {{ if $thumbnail }}
                {{ $image := $thumbnail.Fill "480x270 webp" }} {{/* Hugoの画像処理でリサイズ・webp変換 */}}
                <img src="{{ $image.RelPermalink }}" width="{{ $image.Width }}" height="{{ $image.Height }}" alt="{{ .Title }} のサムネイル" class="w-full h-full object-cover">
            {{ else }}
                <img src="https://via.placeholder.com/480x270.png?text={{ .Title | truncate 15 }}" alt="{{ .Title }} のサムネイル" class="w-full h-full object-cover">
            {{ end }}
        </div>
    </a>
    
    {{/* カードコンテンツエリア */}}
    <div class="p-4 flex flex-col flex-grow"> {{/* flex flex-col flex-grow を追加 */}}
        <h3 class="text-lg font-semibold text-gray-800 mb-2 line-clamp-2">
            <a href="{{ .RelPermalink }}" class="hover:text-primary transition-colors">{{ .Title }}</a>
        </h3>
        <p class="text-sm text-gray-700 mb-3 line-clamp-3 flex-grow">{{ .Summary | plainify | truncate 100 }}</p> {{/* .Summaryと文字数制限 */}}
        
        {{/* タグ表示エリア */}}
        {{ if .Params.tags }}
        <div class="mt-auto pt-2 border-t border-gray-100"> {{/* mt-auto で下寄せ、区切り線 */}}
            <div class="flex flex-wrap gap-1">
            {{ range .Params.tags }}
                <a href="{{ "tags" | absURL }}/{{ . | urlize }}/" class="text-xs bg-gray-100 hover:bg-gray-200 text-gray-600 px-2 py-0.5 rounded transition-colors">{{ . }}</a>
            {{ end }}
            </div>
        </div>
        {{ end }}
    </div>
</div>